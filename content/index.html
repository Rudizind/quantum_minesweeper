<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Quantum Minesweeper</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="./client.css">
        <link rel="icon" href="./favicon/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="./favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="./favicon/favicon-16x16.png">
        <link rel="manifest" href="./favicon/site.webmanifest">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/8.0.1/mocha.min.js"></script>
        <script src="http://chaijs.com/chai.js"></script>
        <script src="./client.js"></script>
        <script src="./board.js"></script>
        <script src="./solver.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/8.0.1/mocha.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="container-fluid" style="height: 11%; background-color: rgb(38, 46, 83); color: white; margin-bottom: 2%;">
            <h1 style="margin-left: 5%;">Quantum Minesweeper</h1>
        </div>
        <div class="container-fluid align-middle" id="login" style="width: 80%; height: 20%; vertical-align: middle; text-align: center;">
            <div class="row">
                <div class="col-sm-2">
                    <p>Log in to play!</p>
                </div>
                <div class="col-sm-3">
                    <label>Username:</label>
                    <input id="usernameBox" type="text" placeholder="Enter username here...">
                </div>
                <div class="col-sm-3">
                    <label>Password:</label>
                    <input  id="passwordBox" type="password"  placeholder="Enter password here...">
                </div>
                <div class="col-sm-2">
                    <button id="regButt" class="btn" onclick="registerUser()">Register</button>
                </div>
                <div class="col-sm-2">
                    <button id="logButt" class="btn" onclick="loginUser()">Log in</button>
                </div>
            </div>
        </div>
        <div class="hidden" id="newgame" style="width: 80%; text-align: center;">
            <div class="row align-middle">
                <div class="col-sm-3"></div>
                <div class="col-sm-3" style="margin: auto;">
                    <p style="vertical-align: middle;">Start a new game of Quantum Minesweeper!</p>
                </div>
                <div class="col-sm-3" style="margin: auto;">
                    <button id="startGameButt" class="btn" onclick="startGame()">Start</button>
                </div>
                <div class="col-sm-3"></div>
            </div>
            <div class="row align-middle">
                <div class="col-sm-2"></div>
                <div class="col-sm-2" style="margin: auto;">
                    <p style="padding-top: 8.5px;">View your Stats!</p>
                </div>
                <div class="col-sm-2" style="margin: auto;">
                    <button id="viewStatsButt" class="btn" onclick="viewStats('single')">Stats</button>
                </div>
                <div class="col-sm-2" style="margin: auto;">
                    <p style="padding-top: 8.5px;">View the Leaderboard!</p>
                </div>
                <div class="col-sm-2" style="margin: auto;">
                    <button id="viewLeaderboardButt" class="btn" onclick="viewStats('all')">Leaderboard</button>
                </div>
                <div class="col-sm-2"></div>
            </div>
            <div class="row align-middle" style="padding-top: 5%;">
                <div class="col-sm-4"></div>
                <div class="col-sm-4" style="margin: auto;">
                    <h5>Game Options</h5>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle">
                <div class="col-sm-4"></div>
                <div class="col-sm-2" style="margin: auto;">
                    <label>Board Size:</label>
                </div>
                <div class="col-sm-2" style="margin: auto;">
                    <select id="boardSizeChoice">
                        <option>Extra Small (5 x 5)</option>
                        <option>Small (8 x 7)</option>
                        <option>Medium (13 x 9)</option>
                        <option>Large (20 x 12)</option>
                        <option>Extra Large (30 x 16)</option>
                    </select>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle">
                <div class="col-sm-4"></div>
                <div class="col-sm-2" style="margin: auto;">
                    <label>Number of Mines:</label>
                </div>
                <div class="col-sm-2" style="margin: auto;">
                    <select id ="mineChoice">
                        <option>Minimum (0.7x)</option>
                        <option>Normal (1.0x)</option>
                        <option>Maximum (1.3x)</option>
                    </select>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle" style="padding-top: 5%; margin: auto;">
                <div class="col-sm-4"></div>
                <div class="col-sm-4" style="margin: auto;">
                    <h5>Additional Features</h5>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle">
                <div class="col-sm-4"></div>
                <div class="col-sm-2" style="margin: auto;">
                    <label>Enable Mine Vision:</label>
                </div>
                <div class="col-sm-1" style="margin: auto;">
                    <input type="checkbox" id="mineVisionCheck"></input>
                </div>
                <div class="col-sm-1">
                    <div class="tooltipShow">?
                        <span class="tooltiptext">
                            Mine Vision lets you see the inner workings of Quantum Minesweeper. All mines are marked out
                            by their darker colour with this option, and when the quantum safety feature kicks in you get 
                            to see how the program has transformed the game board!
                        </span>
                    </div>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle">
                <div class="col-sm-4"></div>
                <div class="col-sm-2">
                    <label>Enable Hints:</label>
                </div>
                <div class="col-sm-1">
                    <input type="checkbox" id="hintCheck"></input>
                </div>
                <div class="col-sm-1">
                    <div class="tooltipShow">?
                        <span class="tooltiptext">
                            Hints can help you out if you're stuck at a particular point in the game. When you use a hint, your 
                            chosen tile will receive one of these three border colors:</br>
                            - <span style="color: green;">Green:</span> Chosen tile is safe to click.
                                Definitely not a mine.</br>
                            - <span style="color: yellow;">Yellow:</span> Chosen tile is safe to click.
                                Might be a mine. Quantum safety will kick in.</br>
                            - <span style="color: red;">Red:</span> Chosen tile is NOT safe to click.
                                Definitely a mine. <strong>Will result in game loss</strong>.
                        </span>
                    </div>
                </div>
                <div class="col-sm-4"></div>
            </div>
            <div class="row align-middle" style="padding-top: 5%;">
                <div class="col-sm-4"></div>
                <div class="col-sm-4">
                    <button class="btn" onclick="showAboutInfo()">About Quantum Minesweeper</button>
                </div>
                <div class="col-sm-4"></div>
            </div>
        </div>
        <div class="hidden" id="aboutInfo">
            <div class="col-sm-2"></div>
            <div class="col-sm-8" style="margin: auto;">
                <h3><strong><u>About Quantum Minesweeper</u></strong></h3></br>
                <h4><u>The Principle of Quantum Minesweeper</u></h4>
                <p>
                    Ever been playing Minesweeper and gotten frustrated that your game has come down to a pure guess? Often a game's conclusion comes down to luck - a 50/50 chance.</br>

                    This version of Minesweeper - 'Quantum Minesweeper' - aims to remove this frustration. Many versions of this game provide a 'safety' feature that ensures the user's 
                    first click cannot be a mine. Here, we extend this concept to every click of a tile in the game, so that you can only lose by making a preventable mistake.</br>
                </p></br>
                <h4><u>Quantum Safety/Solver Algorithms</u></h4>
                <p>
                    When a player clicks on a tile that contains a mine in Quantum Minesweeper, if the solver determines that that tile does not <i>absolutely</i> contain a mine given current known and deducible 
                    information, then the game board will resolve in such a way that that tile is revealed and does NOT contain a mine.
                </p></br>
                <h4><u>How does it work?</u></h4>
                <p>
                    Basically, a solver for Minesweeper is incorporated into the program. This game solver can solve most of a standard Minesweeper board (using all possible logic 
                    that a human player might use), and when it can't determine that the tile you've chosen contains a mine, the game board changes - resolving in such a way that that tile 
                    doesn't contain a mine.</br>

                    This means that if you ever reach a chance scenario during a game that cannot be solved using any form of logic (and <strong>MUST</strong> be guessed), you will never lose the game 
                    even if you do click on a tile containing a mine. So if you're diligent and logical, you'll always win! &#127942;
                </p></br>
                <h4><u>What happens if I lose?</u></h4>
                <p>
                    So... you lost the game. Maybe you know how you lost, and that's cool. Sometimes, though, a player may find that they've lost the game but can't understand why.</br>

                    That's where the solver replay comes in. When you lose the game, you get the option to view how the solver worked out your mistake. It also gives some information on the 
                    reasoning behind its decision-making. It's a fun example of how powerful the solving algorithm is behind the scenes of the game!
                </p></br>
            </div>
            <div class="col-sm-2"></div>
        </div>
        <div class="hidden" id="hotbar">
            <div class="row">
                <div class="col-sm-3"></div>
                <div class="col-sm-2" style="text-align: center;">
                    <p id="scoreDisplay">Mines left: 0</script></p>
                </div>
                <div class="col-sm-2" style="text-align: center;">
                    <p id="activeGame">Active Game</p>
                </div>
                <div class="col-sm-2" style="text-align: center;">
                    <p id="gameTimer">Time Elapsed: 0</p>
                </div>
                <div class="col-sm-3"></div>
            </div>
        </div>
        <div class="hidden" id="replayDisplay">
            <div class="row align-middle">
                <div class="col-sm-3"></div>
                <div class="col-sm-6">
                    <p id="replayText" style="text-align: center;">Game state before solver begins</p>
                </div>
                <div class="col-sm-3"></div>
            </div>
            <div class="row align-middle" style="padding-bottom: 1%;">
                <div class="col-sm-4"></div>
                <div class="col-sm-1" style="text-align: center;">
                    <button id="leftArrow" class="btn" onclick="" style="opacity:0.5;"><</button>
                </div>
                <div class="col-sm-2" style="text-align:center; align-items: center;">
                    <p id="tilesSolved" style="padding-top: 8px;">Tiles solved: 0</p>
                </div>
                <div class="col-sm-1" style="text-align: center;">
                    <button id="rightArrow" class="btn" onclick="solver.changeMove(1)">></button>
                </div>
                <div class="col-sm-4"></div>
            </div>
        </div>
        <div class="hidden" id="gameboard" style="text-align: center; margin-bottom: 1%;">
            <table id="boardTable">
                <!--Content of the table will be created & manipulated using client.js file-->
            </table>
        </div>
        <div class="hidden" id="statsDisplay" style="text-align: center; margin-bottom: 1%;">
            <h5 id="statsHeading"></h5>
            <table id="statsTable" style="width: 80%; border: 2px solid black; margin: auto;">
                <!--Content of the table will be created & manipulated using client.js file-->
            </table>
        </div>
        <div class="hidden" id="homeButt" style="text-align: center; height: 4%; margin-bottom: 1%;">
            <button class="btn" onclick="backHome()">Return to Menu</button>
            <button class="hidden" id="hintButt" onclick="toggleHint()">Use Hint</button>
            <button class="hidden" id="replayButt" onclick="showReplay()">See the solver's actions</button>
        </div>
        </br>
    </body>
</html>